[gd_scene load_steps=20 format=3 uid="uid://crt65xu8olf50"]

[ext_resource type="Script" path="res://rigid_body_3d.gd" id="1_4ppyf"]
[ext_resource type="Resource" uid="uid://cy0ruo8blca0p" path="res://resources/ship_1.tres" id="2_0em3p"]

[sub_resource type="CylinderShape3D" id="CylinderShape3D_1cb5n"]
height = 8.93713

[sub_resource type="SphereShape3D" id="SphereShape3D_1ygqx"]

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_o56j1"]
points = PackedVector3Array(0, 2, 0, 0, 2, 0.2, 1.8, 0, 0, 1.8, 0, 0.2, -1.8, 0, 0, -1.8, 0, 0.2)

[sub_resource type="CylinderMesh" id="CylinderMesh_o5h0k"]
top_radius = 1.0
height = 8.0
cap_top = false

[sub_resource type="CylinderMesh" id="CylinderMesh_qjs6f"]
top_radius = 0.0
bottom_radius = 1.0
height = 3.0
cap_top = false
cap_bottom = false

[sub_resource type="PrismMesh" id="PrismMesh_nqa1p"]
size = Vector3(8, 6.76, 0.2)

[sub_resource type="PrismMesh" id="PrismMesh_mtw3f"]
size = Vector3(3.685, 1.935, 0.2)

[sub_resource type="GDScript" id="GDScript_yqvit"]
script/source = "extends Camera3D

var player: RigidBody3D


# Called when the node enters the scene tree for the first time.
func _ready() -> void:
	player = get_parent()


# Called every frame. 'delta' is the elapsed time since the previous frame.
func _process(delta: float) -> void:
	look_at(player.position)
"

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_2x4ii"]
shading_mode = 0
albedo_color = Color(1, 0.674724, 0.293799, 1)
use_point_size = true
point_size = 4.9

[sub_resource type="PointMesh" id="PointMesh_38m0o"]
material = SubResource("StandardMaterial3D_2x4ii")

[sub_resource type="GDScript" id="GDScript_2huht"]
script/source = "extends CPUParticles3D

@onready var ship_resourse: ShipResource = get_parent().ship_resourse

# Called when the node enters the scene tree for the first time.
func _ready() -> void:
	pass # Replace with function body.


# Called every frame. 'delta' is the elapsed time since the previous frame.
func _process(delta: float) -> void:
	pass
"

[sub_resource type="Curve" id="Curve_7xnt6"]
min_value = -1.0
_data = [Vector2(0, 1), 0.0, 0.0, 0, 0, Vector2(0.110561, -0.280203), 0.0, 0.0, 0, 0, Vector2(0.846535, 0.208122), 0.0, 0.0, 0, 0, Vector2(1, 1), 0.0, 0.0, 0, 0]
point_count = 4

[sub_resource type="CurveTexture" id="CurveTexture_qqtq1"]
curve = SubResource("Curve_7xnt6")

[sub_resource type="Curve" id="Curve_f3spd"]
max_value = 3.0
_data = [Vector2(0, 0), 0.0, 0.0, 0, 0, Vector2(1, 3), 0.0, 0.0, 0, 0]
point_count = 2

[sub_resource type="CurveTexture" id="CurveTexture_paw5a"]
curve = SubResource("Curve_f3spd")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_yiojq"]
lifetime_randomness = 0.68
particle_flag_align_y = true
emission_shape = 6
emission_ring_axis = Vector3(0, 0, 1)
emission_ring_height = -1.15
emission_ring_radius = 1.0
emission_ring_inner_radius = 0.0
inherit_velocity_ratio = 1.0
velocity_pivot = Vector3(-7, 0, 0)
direction = Vector3(-1, 0, 0)
spread = 15.178
gravity = Vector3(0, 0, 0)
scale_over_velocity_min = 33.9
scale_over_velocity_max = 155.93
scale_over_velocity_curve = SubResource("CurveTexture_paw5a")
hue_variation_min = -2.23517e-08
hue_variation_max = 1.0
hue_variation_curve = SubResource("CurveTexture_qqtq1")

[sub_resource type="GDScript" id="GDScript_54o8m"]
script/source = "extends GPUParticles3D

@export var body: RigidBody3D
func update_particles():
	process_material.process_material
	pass
"

[node name="RigidBody3D" type="RigidBody3D"]
transform = Transform3D(-4.37114e-08, -1, 0, 1, -4.37114e-08, 0, 0, 0, 1, 0, 7.81467, 0)
axis_lock_linear_z = true
axis_lock_angular_x = true
axis_lock_angular_y = true
mass = 1000.0
continuous_cd = true
angular_damp = 1.0
script = ExtResource("1_4ppyf")
ship_resourse = ExtResource("2_0em3p")

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(-4.37114e-08, 1, 0, -1, -4.37114e-08, 0, 0, 0, 1, -2.399, 0, 0)
shape = SubResource("CylinderShape3D_1cb5n")

[node name="CollisionShape3D2" type="CollisionShape3D" parent="."]
transform = Transform3D(-4.37114e-08, 1, 0, -1, -4.37114e-08, 0, 0, 0, 1, 1, 0, 0)
shape = SubResource("SphereShape3D_1ygqx")

[node name="CollisionShape3D3" type="CollisionShape3D" parent="."]
transform = Transform3D(-4.37114e-08, 1, 0, -1, -4.37114e-08, 0, 0, 0, 1, -6.91393, 3.02217e-07, -0.11281)
shape = SubResource("ConvexPolygonShape3D_o56j1")

[node name="MeshInstance3D" type="MeshInstance3D" parent="."]
transform = Transform3D(-4.37114e-08, 1, 0, -1, -4.37114e-08, 0, 0, 0, 1, -3, 0, 0)
mesh = SubResource("CylinderMesh_o5h0k")

[node name="MeshInstance3D2" type="MeshInstance3D" parent="MeshInstance3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.40413e-07, 5.5, 0)
mesh = SubResource("CylinderMesh_qjs6f")
skeleton = NodePath("../..")

[node name="MeshInstance3D4" type="MeshInstance3D" parent="MeshInstance3D"]
transform = Transform3D(0, 3.55271e-15, -1, -4.23516e-22, 1, 3.55271e-15, 1, 4.23516e-22, 0, -9.97063e-08, 2.28101, 0)
mesh = SubResource("PrismMesh_nqa1p")
skeleton = NodePath("../..")

[node name="MeshInstance3D5" type="MeshInstance3D" parent="MeshInstance3D"]
transform = Transform3D(1.91069e-15, 0, -1, -4.37114e-08, 1, 0, 1, 4.37114e-08, 1.91069e-15, 1.30134e-07, -2.97712, 0)
mesh = SubResource("PrismMesh_mtw3f")
skeleton = NodePath("../MeshInstance3D4")

[node name="MeshInstance3D6" type="MeshInstance3D" parent="MeshInstance3D"]
transform = Transform3D(-1, -4.37114e-08, -2.98023e-08, -4.37114e-08, 1, 0, 2.98023e-08, 8.88178e-16, -1, 1.30134e-07, -2.97712, 0)
mesh = SubResource("PrismMesh_mtw3f")
skeleton = NodePath("../MeshInstance3D4")

[node name="Camera3D" type="Camera3D" parent="."]
unique_name_in_owner = true
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 100)
current = true
script = SubResource("GDScript_yqvit")

[node name="CPUParticles3D" type="CPUParticles3D" parent="."]
transform = Transform3D(-1, -8.74228e-08, 0, 8.74228e-08, -1, 0, 0, 0, 1, -6.97746, 3.04995e-07, 0)
amount = 500
lifetime = 0.55
explosiveness = 0.08
randomness = 1.0
lifetime_randomness = 0.3
fract_delta = false
mesh = SubResource("PointMesh_38m0o")
emission_shape = 6
emission_ring_axis = Vector3(1, 0, 0)
emission_ring_height = 0.0
emission_ring_radius = 0.485
emission_ring_inner_radius = 0.225
particle_flag_align_y = true
spread = 25.74
gravity = Vector3(0, 0, 0)
initial_velocity_min = 53.28
initial_velocity_max = 53.28
script = SubResource("GDScript_2huht")

[node name="SpotLight3D" type="SpotLight3D" parent="CPUParticles3D"]
transform = Transform3D(-4.37114e-08, -4.37114e-08, -1, -4.37114e-08, 1, -4.37114e-08, 1, 4.37114e-08, -4.37114e-08, 0, 0, 0)
light_energy = 16.0
spot_range = 25.5214
spot_angle = 25.0572

[node name="GPUParticles3D" type="GPUParticles3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -7, 0, 0)
visible = false
amount = 500
lifetime = 0.74
explosiveness = 0.03
randomness = 0.2
fixed_fps = 60
interpolate = false
fract_delta = false
process_material = SubResource("ParticleProcessMaterial_yiojq")
draw_pass_1 = SubResource("PointMesh_38m0o")
script = SubResource("GDScript_54o8m")
